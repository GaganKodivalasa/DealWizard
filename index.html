<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DealWizard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&amp;family=JetBrains+Mono:wght@400;500&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Space Grotesk', sans-serif;
    }
    .mono {
      font-family: 'JetBrains Mono', monospace;
    }
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(16, 185, 129, 0.3); }
      50% { box-shadow: 0 0 40px rgba(16, 185, 129, 0.6); }
    }
    @keyframes slide-up {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }
    .animate-slide-up {
      animation: slide-up 0.4s ease-out forwards;
    }
    .stock-row:hover {
      transform: scale(1.01);
      transition: transform 0.2s ease;
    }
    .modal-backdrop {
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(8px);
    }
    .chat-bubble {
      animation: slide-up 0.3s ease-out;
    }
    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #1a1a2e;
    }
    ::-webkit-scrollbar-thumb {
      background: #4a4a6a;
      border-radius: 4px;
    }
    .money-emoji {
      position: fixed;
      font-size: 3rem;
      opacity: 0.15;
      pointer-events: none;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full bg-gradient-to-br from-slate-900 via-purple-950 to-slate-900 text-white overflow-auto">
  <div id="app" class="h-full w-full flex flex-col"><!-- Home Page -->
   <div id="home-page" class="relative h-full w-full overflow-auto"><!-- Money Emojis Background -->
    <div id="money-container"></div><!-- Center Content -->
    <div class="h-full w-full flex flex-col items-center justify-center px-4 py-8"><!-- Logo & Title -->
     <div class="flex items-center gap-4 mb-12">
      <svg class="w-16 h-16" viewbox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg"><!-- Stock chart represented by bars --> <rect x="15" y="60" width="12" height="30" fill="url(#gradient1)" /> <rect x="35" y="40" width="12" height="50" fill="url(#gradient1)" /> <rect x="55" y="20" width="12" height="70" fill="url(#gradient1)" /> <rect x="75" y="35" width="12" height="55" fill="url(#gradient1)" /> <!-- Upward arrow --> <path d="M 50 75 L 50 25 M 45 30 L 50 25 L 55 30" stroke="url(#gradient1)" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round" /> <defs>
        <lineargradient id="gradient1" x1="0%" y1="0%" x2="100%" y2="100%">
         <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
         <stop offset="100%" style="stop-color:#06b6d4;stop-opacity:1" />
        </lineargradient>
       </defs>
      </svg>
      <div>
       <h1 class="text-5xl font-bold bg-gradient-to-r from-emerald-400 to-cyan-400 bg-clip-text text-transparent">DealWizard</h1>
       <p class="text-emerald-400 font-bold text-lg tracking-widest mt-1">SEAL THE DEAL</p>
      </div>
     </div><!-- Feature Buttons (Enlarged 1.5x) -->
     <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12 w-full max-w-2xl px-4"><!-- Market Feature --> <button onclick="goToMarket()" class="group bg-slate-800/40 hover:bg-slate-700/40 border-2 border-purple-700/30 hover:border-emerald-500/50 rounded-3xl p-8 text-left transition-all duration-300 hover:shadow-2xl hover:shadow-emerald-500/20">
       <div class="text-6xl mb-3">
        ğŸ“ˆ
       </div><h3 class="font-bold text-xl text-white group-hover:text-emerald-400 transition-colors">Stock Market</h3><p class="text-slate-400 text-base mt-2">Track and analyze the top 100 global companies in real-time</p></button> <!-- Bargaining Feature --> <button onclick="goToBargain()" class="group bg-slate-800/40 hover:bg-slate-700/40 border-2 border-purple-700/30 hover:border-emerald-500/50 rounded-3xl p-8 text-left transition-all duration-300 hover:shadow-2xl hover:shadow-emerald-500/20">
       <div class="text-6xl mb-3">
        ğŸ¤
       </div><h3 class="font-bold text-xl text-white group-hover:text-emerald-400 transition-colors">Dealio Bargaining AI</h3><p class="text-slate-400 text-base mt-2">Master negotiation skills with AI-powered scenario simulations</p></button>
     </div><!-- Description Box (Below buttons, longer) -->
     <div class="w-full max-w-2xl bg-slate-900/80 backdrop-blur border border-emerald-500/30 rounded-2xl p-6">
      <p class="text-base leading-relaxed text-slate-200 text-center">Negotiate with confidence. Simulate real-world deals with an AI negotiation assistant, learn proven strategies, and stay on top of the stock market with clear, intelligent insights.</p>
     </div>
    </div>
   </div><!-- Market Page -->
   <div id="market-page" class="hidden h-full w-full flex flex-col"><!-- Header -->
    <header class="p-4 md:p-6 border-b border-purple-800/30">
     <div class="max-w-7xl mx-auto flex flex-col md:flex-row md:items-center md:justify-between gap-4"><button onclick="switchTab('home')" class="flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity">
       <svg class="w-10 h-10" viewbox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="15" y="60" width="12" height="30" fill="url(#gradient2)" /> <rect x="35" y="40" width="12" height="50" fill="url(#gradient2)" /> <rect x="55" y="20" width="12" height="70" fill="url(#gradient2)" /> <rect x="75" y="35" width="12" height="55" fill="url(#gradient2)" /> <path d="M 50 75 L 50 25 M 45 30 L 50 25 L 55 30" stroke="url(#gradient2)" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round" /> <defs>
         <lineargradient id="gradient2" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
          <stop offset="100%" style="stop-color:#06b6d4;stop-opacity:1" />
         </lineargradient>
        </defs>
       </svg>
       <div>
        <h1 id="app-title" class="text-2xl font-bold bg-gradient-to-r from-emerald-400 to-cyan-400 bg-clip-text text-transparent">DealWizard</h1>
        <p class="text-emerald-400 font-bold text-sm tracking-wider">SEAL THE DEAL</p>
       </div></button> <!-- Tabs -->
      <div class="flex bg-slate-800/50 rounded-xl p-1 border border-purple-700/30"><button id="tab-market" onclick="switchTab('market')" class="px-4 py-2 rounded-lg font-medium transition-all duration-300 bg-gradient-to-r from-emerald-500 to-cyan-500 text-white"> ğŸ“ˆ Stock Market </button> <button id="tab-bargain" onclick="switchTab('bargain')" class="px-4 py-2 rounded-lg font-medium transition-all duration-300 text-slate-400 hover:text-white"> ğŸ¤ Dealio Bargaining AI </button>
      </div>
     </div>
    </header><!-- Main Content -->
    <main class="flex-1 overflow-auto p-4 md:p-6"><!-- Market Summary -->
     <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
      <div class="bg-slate-800/40 rounded-2xl p-4 border border-emerald-500/20">
       <div class="flex items-center justify-between"><span class="text-slate-400 text-sm">S&amp;P 500</span> <span class="text-emerald-400 text-sm">â–² 1.24%</span>
       </div>
       <div class="mono text-2xl font-bold text-white mt-1">
        5,234.18
       </div>
      </div>
      <div class="bg-slate-800/40 rounded-2xl p-4 border border-cyan-500/20">
       <div class="flex items-center justify-between"><span class="text-slate-400 text-sm">NASDAQ</span> <span class="text-emerald-400 text-sm">â–² 1.87%</span>
       </div>
       <div class="mono text-2xl font-bold text-white mt-1">
        16,742.39
       </div>
      </div>
      <div class="bg-slate-800/40 rounded-2xl p-4 border border-purple-500/20">
       <div class="flex items-center justify-between"><span class="text-slate-400 text-sm">DOW JONES</span> <span class="text-red-400 text-sm">â–¼ 0.32%</span>
       </div>
       <div class="mono text-2xl font-bold text-white mt-1">
        39,127.14
       </div>
      </div>
      <div class="bg-slate-800/40 rounded-2xl p-4 border border-blue-500/20">
       <div class="flex items-center justify-between"><span class="text-slate-400 text-sm">NIKKEI 225 ğŸ‡¯ğŸ‡µ</span> <span class="text-emerald-400 text-sm">â–² 0.67%</span>
       </div>
       <div class="mono text-2xl font-bold text-white mt-1">
        32,478.95
       </div>
      </div>
      <div class="bg-slate-800/40 rounded-2xl p-4 border border-pink-500/20">
       <div class="flex items-center justify-between"><span class="text-slate-400 text-sm">HANG SENG ğŸ‡­ğŸ‡°</span> <span class="text-emerald-400 text-sm">â–² 2.12%</span>
       </div>
       <div class="mono text-2xl font-bold text-white mt-1">
        18,524.67
       </div>
      </div>
     </div><!-- Search & Filter -->
     <div class="flex flex-col md:flex-row gap-4 mb-6">
      <div class="flex-1 relative"><input type="text" id="search-input" placeholder="Search companies..." class="w-full bg-slate-800/50 border border-purple-700/30 rounded-xl px-4 py-3 pl-10 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 transition-colors"> <span class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-500">ğŸ”</span>
      </div><select id="sector-filter" class="bg-slate-800/50 border border-purple-700/30 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-emerald-500/50"> <option value="all">All Sectors</option> <option value="tech">Technology</option> <option value="finance">Finance</option> <option value="healthcare">Healthcare</option> <option value="energy">Energy</option> <option value="consumer">Consumer</option> <option value="industrial">Industrial</option> </select>
     </div><!-- Stock Table -->
     <div class="bg-slate-800/30 rounded-2xl border border-purple-700/20 overflow-hidden">
      <div class="overflow-x-auto">
       <table class="w-full">
        <thead class="bg-slate-900/50">
         <tr class="text-left text-slate-400 text-sm">
          <th class="px-4 py-4 font-medium">#</th>
          <th class="px-4 py-4 font-medium">Company</th>
          <th class="px-4 py-4 font-medium">Symbol</th>
          <th class="px-4 py-4 font-medium text-right">Price</th>
          <th class="px-4 py-4 font-medium text-right">Change</th>
          <th class="px-4 py-4 font-medium text-right">Market Cap</th>
          <th class="px-4 py-4 font-medium text-center">Info</th>
         </tr>
        </thead>
        <tbody id="stock-table-body"><!-- Stock rows will be populated here -->
        </tbody>
       </table>
      </div>
     </div>
     <div class="mt-4 text-center text-slate-500 text-sm">
      ğŸ’¡ Click the info button to see company details including country of origin
     </div>
    </main>
   </div><!-- Bargaining Page -->
   <div id="bargain-page" class="hidden h-full w-full flex flex-col"><!-- Header -->
    <header class="p-4 md:p-6 border-b border-purple-800/30">
     <div class="max-w-7xl mx-auto flex flex-col md:flex-row md:items-center md:justify-between gap-4"><button onclick="switchTab('home')" class="flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity">
       <svg class="w-10 h-10" viewbox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="15" y="60" width="12" height="30" fill="url(#gradient3)" /> <rect x="35" y="40" width="12" height="50" fill="url(#gradient3)" /> <rect x="55" y="20" width="12" height="70" fill="url(#gradient3)" /> <rect x="75" y="35" width="12" height="55" fill="url(#gradient3)" /> <path d="M 50 75 L 50 25 M 45 30 L 50 25 L 55 30" stroke="url(#gradient3)" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round" /> <defs>
         <lineargradient id="gradient3" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
          <stop offset="100%" style="stop-color:#06b6d4;stop-opacity:1" />
         </lineargradient>
        </defs>
       </svg>
       <div>
        <h1 id="app-title-2" class="text-2xl font-bold bg-gradient-to-r from-emerald-400 to-cyan-400 bg-clip-text text-transparent">DealWizard</h1>
        <p class="text-emerald-400 font-bold text-sm tracking-wider">SEAL THE DEAL</p>
       </div></button> <!-- Tabs -->
      <div class="flex bg-slate-800/50 rounded-xl p-1 border border-purple-700/30"><button id="tab-market-2" onclick="switchTab('market')" class="px-4 py-2 rounded-lg font-medium transition-all duration-300 text-slate-400 hover:text-white"> ğŸ“ˆ Stock Market </button> <button id="tab-bargain-2" onclick="switchTab('bargain')" class="px-4 py-2 rounded-lg font-medium transition-all duration-300 bg-gradient-to-r from-emerald-500 to-cyan-500 text-white"> ğŸ¤ Dealio Bargaining AI </button>
      </div>
     </div>
    </header><!-- Main Content -->
    <main class="flex-1 overflow-auto p-4 md:p-6"><!-- Scenario Selection -->
     <div id="scenario-select" class="max-w-6xl mx-auto mb-6">
      <h2 class="text-2xl font-bold mb-6 text-emerald-400">Choose a Bargaining Scenario</h2><!-- Car Scenarios -->
      <div class="mb-8">
       <h3 class="text-lg font-bold text-white mb-4">ğŸš— Buy a Used Car</h3>
       <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"><!-- Car options populated by JavaScript -->
       </div>
      </div><!-- Salary Scenarios -->
      <div class="mb-8">
       <h3 class="text-lg font-bold text-white mb-4">ğŸ’¼ Salary Negotiation</h3>
       <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"><!-- Salary options populated by JavaScript -->
       </div>
      </div><!-- Vendor Scenarios -->
      <div class="mb-8">
       <h3 class="text-lg font-bold text-white mb-4">ğŸª Street Market Haggling</h3>
       <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"><!-- Vendor options populated by JavaScript -->
       </div>
      </div>
     </div><!-- Chat Interface -->
     <div id="chat-interface" class="hidden max-w-4xl mx-auto"><!-- Scenario Header -->
      <div id="scenario-header" class="bg-slate-800/40 rounded-2xl p-4 border border-purple-700/30 mb-4">
       <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
         <div id="scenario-icon" class="text-3xl">
          ğŸš—
         </div>
         <div>
          <h3 id="scenario-title" class="font-bold text-white">Car Negotiation</h3>
          <p id="scenario-desc" class="text-slate-400 text-sm">Starting price: $15,000</p>
         </div>
        </div><button onclick="resetBargain()" class="px-3 py-2 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg text-sm text-slate-300 transition-colors"> ğŸ”„ New Scenario </button>
       </div><!-- Progress Bar -->
       <div class="mt-4">
        <div class="flex justify-between text-sm text-slate-400 mb-2"><span>Your Goal: <span id="goal-price" class="text-emerald-400 font-bold">$12,000</span></span> <span>Current Offer: <span id="current-offer" class="text-cyan-400 font-bold">$15,000</span></span>
        </div>
        <div class="h-2 bg-slate-700 rounded-full overflow-hidden">
         <div id="progress-bar" class="h-full bg-gradient-to-r from-emerald-500 to-cyan-500 transition-all duration-500" style="width: 0%"></div>
        </div>
       </div>
      </div><!-- Chat Messages -->
      <div id="chat-messages" class="bg-slate-800/30 rounded-2xl border border-purple-700/20 p-4 h-80 overflow-y-auto mb-4 space-y-4"><!-- Messages will appear here -->
      </div><!-- Quick Responses -->
      <div id="quick-responses" class="flex flex-wrap gap-2 mb-4"><!-- Quick response buttons will be populated -->
      </div><!-- Chat Input -->
      <div class="flex gap-3"><input type="text" id="chat-input" placeholder="Type your offer or response..." class="flex-1 bg-slate-800/50 border border-purple-700/30 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 transition-colors"> <button id="send-btn" class="px-6 py-3 bg-gradient-to-r from-emerald-500 to-cyan-500 hover:from-emerald-400 hover:to-cyan-400 rounded-xl font-medium transition-all duration-300 transform hover:scale-105"> Send ğŸ’¬ </button>
      </div>
     </div>
    </main>
   </div><!-- Company Modal -->
   <div id="company-modal" class="fixed inset-0 modal-backdrop z-50 hidden flex items-center justify-center p-4">
    <div class="bg-slate-900 rounded-3xl border border-purple-700/30 max-w-lg w-full animate-slide-up overflow-hidden">
     <div id="modal-header" class="p-6 bg-gradient-to-r from-emerald-500/20 to-cyan-500/20">
      <div class="flex items-center justify-between">
       <div class="flex items-center gap-4">
        <div id="modal-logo" class="w-16 h-16 rounded-2xl bg-slate-800 flex items-center justify-center text-2xl font-bold"></div>
        <div>
         <h2 id="modal-company" class="text-xl font-bold text-white"></h2>
         <p id="modal-symbol" class="text-emerald-400 mono"></p>
        </div>
       </div><button onclick="closeModal()" class="w-10 h-10 rounded-full bg-slate-800/50 hover:bg-slate-700/50 flex items-center justify-center text-slate-400 hover:text-white transition-colors"> âœ• </button>
      </div>
     </div>
     <div class="p-6 space-y-4">
      <div class="grid grid-cols-2 gap-4">
       <div class="bg-slate-800/50 rounded-xl p-4"><span class="text-slate-400 text-sm">Country</span>
        <div id="modal-country" class="flex items-center gap-2 mt-1"><span id="modal-flag" class="text-2xl"></span> <span id="modal-country-name" class="font-medium text-white"></span>
        </div>
       </div>
       <div class="bg-slate-800/50 rounded-xl p-4"><span class="text-slate-400 text-sm">Sector</span>
        <p id="modal-sector" class="font-medium text-white mt-1"></p>
       </div>
       <div class="bg-slate-800/50 rounded-xl p-4"><span class="text-slate-400 text-sm">Stock Price</span>
        <p id="modal-price" class="font-medium text-white mt-1 mono"></p>
       </div>
       <div class="bg-slate-800/50 rounded-xl p-4"><span class="text-slate-400 text-sm">Market Cap</span>
        <p id="modal-cap" class="font-medium text-white mt-1"></p>
       </div>
      </div>
      <div class="bg-slate-800/50 rounded-xl p-4"><span class="text-slate-400 text-sm">About</span>
       <p id="modal-about" class="text-white mt-2 text-sm leading-relaxed"></p>
      </div>
      <div class="flex items-center justify-between pt-2">
       <div id="modal-change" class="flex items-center gap-2"></div>
       <div class="text-slate-500 text-sm">
        Founded: <span id="modal-founded"></span>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
  <script>
    // Config and SDK Setup
    const defaultConfig = {
      app_title: 'DealWizard',
      market_tab_label: 'Stock Market',
      bargain_tab_label: 'Dealio Bargaining AI'
    };

    let config = { ...defaultConfig };

    // Top 100 Companies Data
    const companies = [
      { rank: 1, name: "Apple Inc.", symbol: "AAPL", price: 178.72, change: 2.34, marketCap: "2.89T", sector: "tech", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1976, about: "Apple designs, manufactures, and markets smartphones, personal computers, tablets, wearables, and accessories worldwide." },
      { rank: 2, name: "Microsoft Corporation", symbol: "MSFT", price: 378.91, change: 1.56, marketCap: "2.81T", sector: "tech", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1975, about: "Microsoft develops, licenses, and supports software, services, devices, and solutions worldwide." },
      { rank: 3, name: "Saudi Aramco", symbol: "2222.SR", price: 32.15, change: -0.45, marketCap: "2.12T", sector: "energy", country: "Saudi Arabia", flag: "ğŸ‡¸ğŸ‡¦", founded: 1933, about: "Saudi Aramco is one of the world's largest integrated energy and chemicals companies." },
      { rank: 4, name: "Alphabet Inc.", symbol: "GOOGL", price: 141.80, change: 1.89, marketCap: "1.79T", sector: "tech", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1998, about: "Alphabet is a multinational conglomerate, parent company of Google, specializing in Internet-related services and products." },
      { rank: 5, name: "Amazon.com Inc.", symbol: "AMZN", price: 178.25, change: 3.21, marketCap: "1.86T", sector: "consumer", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1994, about: "Amazon is a multinational technology company focusing on e-commerce, cloud computing, and artificial intelligence." },
      { rank: 6, name: "NVIDIA Corporation", symbol: "NVDA", price: 495.22, change: 5.67, marketCap: "1.22T", sector: "tech", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1993, about: "NVIDIA designs and manufactures graphics processing units and system on chip units." },
      { rank: 7, name: "Berkshire Hathaway", symbol: "BRK.A", price: 544230.00, change: 0.12, marketCap: "785B", sector: "finance", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1839, about: "Berkshire Hathaway is a multinational conglomerate holding company led by Warren Buffett." },
      { rank: 8, name: "Meta Platforms", symbol: "META", price: 505.95, change: 2.78, marketCap: "1.29T", sector: "tech", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 2004, about: "Meta Platforms develops products that enable people to connect through mobile devices, PCs, and VR." },
      { rank: 9, name: "Tesla Inc.", symbol: "TSLA", price: 177.48, change: -1.23, marketCap: "565B", sector: "consumer", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 2003, about: "Tesla designs, develops, manufactures, and sells electric vehicles and energy storage products." },
      { rank: 10, name: "TSMC", symbol: "TSM", price: 137.92, change: 2.15, marketCap: "715B", sector: "tech", country: "Taiwan", flag: "  ğŸ‡¼", founded: 1987, about: "Taiwan Semiconductor Manufacturing Company is the world's largest dedicated semiconductor foundry." },
      { rank: 11, name: "Eli Lilly", symbol: "LLY", price: 752.11, change: 3.45, marketCap: "715B", sector: "healthcare", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1876, about: "Eli Lilly discovers, develops, and markets pharmaceutical products worldwide." },
      { rank: 12, name: "Visa Inc.", symbol: "V", price: 279.34, change: 0.87, marketCap: "574B", sector: "finance", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1958, about: "Visa operates a global payments technology network facilitating electronic fund transfers." },
      { rank: 13, name: "JPMorgan Chase", symbol: "JPM", price: 195.74, change: 1.12, marketCap: "566B", sector: "finance", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1871, about: "JPMorgan Chase is a multinational investment bank and financial services holding company." },
      { rank: 14, name: "Walmart Inc.", symbol: "WMT", price: 162.89, change: 0.65, marketCap: "439B", sector: "consumer", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1962, about: "Walmart operates a chain of hypermarkets, discount department stores, and grocery stores." },
      { rank: 15, name: "UnitedHealth Group", symbol: "UNH", price: 521.34, change: -0.89, marketCap: "482B", sector: "healthcare", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1977, about: "UnitedHealth Group is a diversified healthcare company offering health benefits and services." },
      { rank: 16, name: "Novo Nordisk", symbol: "NVO", price: 127.55, change: 2.34, marketCap: "567B", sector: "healthcare", country: "Denmark", flag: "ğŸ‡©ğŸ‡°", founded: 1923, about: "Novo Nordisk is a Danish pharmaceutical company specializing in diabetes care." },
      { rank: 17, name: "LVMH", symbol: "MC.PA", price: 743.20, change: 1.23, marketCap: "372B", sector: "consumer", country: "France", flag: "ğŸ‡«ğŸ‡·", founded: 1987, about: "LVMH is a French multinational luxury goods conglomerate." },
      { rank: 18, name: "Samsung Electronics", symbol: "005930.KS", price: 71.45, change: 0.98, marketCap: "428B", sector: "tech", country: "South Korea", flag: "ğŸ‡°ğŸ‡·", founded: 1969, about: "Samsung Electronics is a South Korean multinational electronics corporation." },
      { rank: 19, name: "Mastercard", symbol: "MA", price: 456.78, change: 1.45, marketCap: "425B", sector: "finance", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1966, about: "Mastercard is a global payments and technology company connecting consumers and businesses." },
      { rank: 20, name: "Johnson & Johnson", symbol: "JNJ", price: 156.23, change: -0.34, marketCap: "376B", sector: "healthcare", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1886, about: "Johnson & Johnson researches, develops, and manufactures medicines and vaccines." },
      { rank: 21, name: "Procter & Gamble", symbol: "PG", price: 162.45, change: 0.56, marketCap: "382B", sector: "consumer", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1837, about: "P&G provides branded consumer packaged goods to consumers worldwide." },
      { rank: 22, name: "Home Depot", symbol: "HD", price: 343.67, change: 1.78, marketCap: "341B", sector: "consumer", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1978, about: "Home Depot operates as a home improvement retailer." },
      { rank: 23, name: "NestlÃ©", symbol: "NESN.SW", price: 98.34, change: -0.23, marketCap: "273B", sector: "consumer", country: "Switzerland", flag: "ğŸ‡¨ğŸ‡­", founded: 1866, about: "NestlÃ© is a Swiss multinational food and drink processing corporation." },
      { rank: 24, name: "ASML Holding", symbol: "ASML", price: 967.45, change: 4.56, marketCap: "380B", sector: "tech", country: "Netherlands", flag: "ğŸ‡³ğŸ‡±", founded: 1984, about: "ASML is a Dutch company specializing in photolithography equipment for semiconductor manufacturing." },
      { rank: 25, name: "Exxon Mobil", symbol: "XOM", price: 103.78, change: -1.12, marketCap: "413B", sector: "energy", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1999, about: "ExxonMobil is a multinational oil and gas corporation." },
      { rank: 26, name: "Chevron Corporation", symbol: "CVX", price: 151.23, change: -0.89, marketCap: "279B", sector: "energy", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1879, about: "Chevron is an American multinational energy corporation." },
      { rank: 27, name: "AbbVie Inc.", symbol: "ABBV", price: 171.45, change: 1.23, marketCap: "303B", sector: "healthcare", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 2013, about: "AbbVie discovers, develops, and commercializes pharmaceutical products." },
      { rank: 28, name: "Tencent Holdings", symbol: "0700.HK", price: 378.90, change: 2.34, marketCap: "362B", sector: "tech", country: "China", flag: "ğŸ‡¨ğŸ‡³", founded: 1998, about: "Tencent is a Chinese multinational technology and entertainment conglomerate." },
      { rank: 29, name: "Merck & Co.", symbol: "MRK", price: 127.89, change: 0.67, marketCap: "324B", sector: "healthcare", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1891, about: "Merck is an American multinational pharmaceutical company." },
      { rank: 30, name: "Coca-Cola Company", symbol: "KO", price: 59.78, change: 0.34, marketCap: "258B", sector: "consumer", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1892, about: "Coca-Cola manufactures and markets nonalcoholic beverages worldwide." },
      { rank: 31, name: "Bank of America", symbol: "BAC", price: 33.45, change: 0.89, marketCap: "264B", sector: "finance", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1904, about: "Bank of America is a multinational investment bank and financial services company." },
      { rank: 32, name: "Alibaba Group", symbol: "BABA", price: 73.56, change: 1.45, marketCap: "187B", sector: "tech", country: "China", flag: "ğŸ‡¨ğŸ‡³", founded: 1999, about: "Alibaba is a Chinese multinational technology company specializing in e-commerce." },
      { rank: 33, name: "PepsiCo Inc.", symbol: "PEP", price: 169.23, change: 0.45, marketCap: "232B", sector: "consumer", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1965, about: "PepsiCo is a multinational food, snack, and beverage corporation." },
      { rank: 34, name: "Costco Wholesale", symbol: "COST", price: 723.45, change: 2.12, marketCap: "321B", sector: "consumer", country: "USA", flag: "   ğŸ‡¸", founded: 1983, about: "Costco operates membership-only warehouse clubs." },
      { rank: 35, name: "Oracle Corporation", symbol: "ORCL", price: 124.67, change: 1.78, marketCap: "345B", sector: "tech", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1977, about: "Oracle provides products and services addressing enterprise IT environments." },
      { rank: 36, name: "Adobe Inc.", symbol: "ADBE", price: 578.34, change: 3.45, marketCap: "259B", sector: "tech", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1982, about: "Adobe offers products and services for creative professionals and marketers." },
      { rank: 37, name: "ICBC", symbol: "1398.HK", price: 4.23, change: 0.12, marketCap: "198B", sector: "finance", country: "China", flag: "ğŸ‡¨ğŸ‡³", founded: 1984, about: "ICBC is a Chinese multinational banking company, one of the Big Four banks." },
      { rank: 38, name: "Pfizer Inc.", symbol: "PFE", price: 27.89, change: -0.56, marketCap: "157B", sector: "healthcare", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1849, about: "Pfizer discovers, develops, and manufactures medicines and vaccines." },
      { rank: 39, name: "Thermo Fisher", symbol: "TMO", price: 567.89, change: 2.34, marketCap: "218B", sector: "healthcare", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 2006, about: "Thermo Fisher serves science through life sciences and diagnostics products." },
      { rank: 40, name: "Salesforce", symbol: "CRM", price: 267.45, change: 1.89, marketCap: "259B", sector: "tech", country: "USA", flag: "ğŸ‡º  ", founded: 1999, about: "Salesforce provides customer relationship management software and applications." },
      { rank: 41, name: "Toyota Motor", symbol: "TM", price: 234.56, change: 0.78, marketCap: "312B", sector: "consumer", country: "Japan", flag: "ğŸ‡¯ğŸ‡µ", founded: 1937, about: "Toyota is a Japanese multinational automotive manufacturer." },
      { rank: 42, name: "Netflix Inc.", symbol: "NFLX", price: 478.23, change: 4.56, marketCap: "207B", sector: "consumer", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1997, about: "Netflix provides entertainment services through streaming media." },
      { rank: 43, name: "Cisco Systems", symbol: "CSCO", price: 48.67, change: 0.34, marketCap: "198B", sector: "tech", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1984, about: "Cisco designs, manufactures, and sells Internet Protocol-based networking products." },
      { rank: 44, name: "Accenture", symbol: "ACN", price: 345.78, change: 1.23, marketCap: "216B", sector: "tech", country: "Ireland", flag: "ğŸ‡®ğŸ‡ª", founded: 1989, about: "Accenture is a multinational professional services company." },
      { rank: 45, name: "McDonald's Corp", symbol: "MCD", price: 289.45, change: 0.89, marketCap: "208B", sector: "consumer", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1940, about: "McDonald's operates and franchises restaurants worldwide." },
      { rank: 46, name: "AstraZeneca", symbol: "AZN", price: 67.34, change: 1.45, marketCap: "208B", sector: "healthcare", country: "UK", flag: "ğŸ‡¬ğŸ‡§", founded: 1999, about: "AstraZeneca is a British-Swedish pharmaceutical company." },
      { rank: 47, name: "Broadcom Inc.", symbol: "AVGO", price: 1234.56, change: 5.67, marketCap: "574B", sector: "tech", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1961, about: "Broadcom designs, develops, and supplies semiconductor and infrastructure software solutions." },
      { rank: 48, name: "Intel Corporation", symbol: "INTC", price: 43.78, change: -0.45, marketCap: "184B", sector: "tech", country: "USA", flag: "ğŸ‡º    ", founded: 1968, about: "Intel designs and manufactures computer components and related products." },
      { rank: 49, name: "Nike Inc.", symbol: "NKE", price: 103.45, change: 1.23, marketCap: "157B", sector: "consumer", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1964, about: "Nike designs, develops, and markets athletic footwear and apparel worldwide." },
      { rank: 50, name: "Disney Company", symbol: "DIS", price: 112.34, change: 0.67, marketCap: "205B", sector: "consumer", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1923, about: "Disney is an American multinational mass media and entertainment conglomerate." },
      { rank: 51, name: "Roche Holding", symbol: "ROG.SW", price: 245.67, change: 0.89, marketCap: "212B", sector: "healthcare", country: "Switzerland", flag: "ğŸ‡¨ğŸ‡­", founded: 1896, about: "Roche is a Swiss multinational healthcare company." },
      { rank: 52, name: "Verizon", symbol: "VZ", price: 40.23, change: 0.23, marketCap: "169B", sector: "tech", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1983, about: "Verizon is an American telecommunications conglomerate." },
      { rank: 53, name: "Wells Fargo", symbol: "WFC", price: 55.67, change: 0.78, marketCap: "199B", sector: "finance", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1852, about: "Wells Fargo is a multinational financial services company." },
      { rank: 54, name: "Comcast Corp", symbol: "CMCSA", price: 43.89, change: 0.34, marketCap: "171B", sector: "consumer", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1963, about: "Comcast is a global media and technology company." },
      { rank: 55, name: "Danaher Corp", symbol: "DHR", price: 256.78, change: 1.45, marketCap: "189B", sector: "healthcare", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1984, about: "Danaher designs, manufactures, and markets professional, medical, and industrial products." },
      { rank: 56, name: "SAP SE", symbol: "SAP", price: 189.45, change: 2.12, marketCap: "221B", sector: "tech", country: "Germany", flag: "ğŸ‡©ğŸ‡ª", founded: 1972, about: "SAP is a German multinational software company." },
      { rank: 57, name: "Texas Instruments", symbol: "TXN", price: 178.34, change: 1.23, marketCap: "162B", sector: "tech", country: "USA", flag: "ğŸ‡º    ", founded: 1951, about: "Texas Instruments designs and manufactures semiconductors and integrated circuits." },
      { rank: 58, name: "Abbott Labs", symbol: "ABT", price: 112.45, change: 0.67, marketCap: "195B", sector: "healthcare", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1888, about: "Abbott discovers, develops, and manufactures healthcare products." },
      { rank: 59, name: "Shell plc", symbol: "SHEL", price: 67.89, change: -0.34, marketCap: "213B", sector: "energy", country: "UK", flag: "ğŸ‡¬    ", founded: 1907, about: "Shell is a British multinational oil and gas company." },
      { rank: 60, name: "Linde plc", symbol: "LIN", price: 423.56, change: 1.78, marketCap: "205B", sector: "industrial", country: "Ireland", flag: "ğŸ‡®ğŸ‡ª", founded: 1879, about: "Linde is a multinational chemical and gas company." },
      { rank: 61, name: "AMD Inc.", symbol: "AMD", price: 156.78, change: 3.45, marketCap: "253B", sector: "tech", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1969, about: "AMD develops computer processors and related technologies." },
      { rank: 62, name: "Siemens AG", symbol: "SIE.DE", price: 178.34, change: 1.12, marketCap: "142B", sector: "industrial", country: "Germany", flag: "ğŸ‡©ğŸ‡ª", founded: 1847, about: "Siemens is a German multinational conglomerate corporation." },
      { rank: 63, name: "Sony Group", symbol: "SONY", price: 89.45, change: 1.34, marketCap: "112B", sector: "consumer", country: "Japan", flag: "ğŸ‡¯ğŸ‡µ", founded: 1946, about: "Sony is a Japanese multinational conglomerate corporation." },
      { rank: 64, name: "Union Pacific", symbol: "UNP", price: 245.67, change: 0.89, marketCap: "149B", sector: "industrial", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1862, about: "Union Pacific operates one of North America's premier railroad franchises." },
      { rank: 65, name: "AT&T Inc.", symbol: "T", price: 17.45, change: 0.12, marketCap: "125B", sector: "tech", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1983, about: "AT&T is an American multinational telecommunications corporation." },
      { rank: 66, name: "Goldman Sachs", symbol: "GS", price: 445.67, change: 2.34, marketCap: "145B", sector: "finance", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1869, about: "Goldman Sachs is an American multinational investment bank." },
      { rank: 67, name: "Honeywell", symbol: "HON", price: 198.45, change: 0.78, marketCap: "130B", sector: "industrial", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1906, about: "Honeywell is an American multinational conglomerate corporation." },
      { rank: 68, name: "Morgan Stanley", symbol: "MS", price: 89.34, change: 1.23, marketCap: "147B", sector: "finance", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1935, about: "Morgan Stanley is an American multinational investment bank." },
      { rank: 69, name: "ServiceNow", symbol: "NOW", price: 745.67, change: 4.56, marketCap: "153B", sector: "tech", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 2004, about: "ServiceNow provides enterprise cloud computing solutions." },
      { rank: 70, name: "Qualcomm", symbol: "QCOM", price: 167.89, change: 2.12, marketCap: "187B", sector: "tech", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1985, about: "Qualcomm develops and markets wireless telecommunications products." },
      { rank: 71, name: "Amgen Inc.", symbol: "AMGN", price: 278.45, change: 1.45, marketCap: "149B", sector: "healthcare", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1980, about: "Amgen is an American multinational biopharmaceutical company." },
      { rank: 72, name: "Philip Morris", symbol: "PM", price: 95.67, change: 0.34, marketCap: "148B", sector: "consumer", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 2008, about: "Philip Morris is an American multinational cigarette and tobacco company." },
      { rank: 73, name: "Boeing Company", symbol: "BA", price: 178.34, change: -1.23, marketCap: "109B", sector: "industrial", country: "USA", flag: "ğŸ‡º      ", founded: 1916, about: "Boeing is an American multinational aerospace company." },
      { rank: 74, name: "Caterpillar", symbol: "CAT", price: 312.45, change: 1.78, marketCap: "153B", sector: "industrial", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1925, about: "Caterpillar is an American manufacturer of construction and mining equipment." },
      { rank: 75, name: "IBM Corporation", symbol: "IBM", price: 167.89, change: 0.67, marketCap: "154B", sector: "tech", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1911, about: "IBM is an American multinational technology and consulting company." },
      { rank: 76, name: "Lockheed Martin", symbol: "LMT", price: 456.78, change: 1.12, marketCap: "110B", sector: "industrial", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1995, about: "Lockheed Martin is an American aerospace and defense company." },
      { rank: 77, name: "BHP Group", symbol: "BHP", price: 59.34, change: -0.56, marketCap: "150B", sector: "industrial", country: "Australia", flag: "ğŸ‡¦ğŸ‡º", founded: 1885, about: "BHP is an Australian multinational mining and petroleum company." },
      { rank: 78, name: "CVS Health", symbol: "CVS", price: 78.45, change: 0.45, marketCap: "102B", sector: "healthcare", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1963, about: "CVS Health is an American healthcare company." },
      { rank: 79, name: "TotalEnergies", symbol: "TTE", price: 67.23, change: -0.34, marketCap: "159B", sector: "energy", country: "France", flag: "ğŸ‡«ğŸ‡·", founded: 1924, about: "TotalEnergies is a French multinational integrated oil and gas company." },
      { rank: 80, name: "General Electric", symbol: "GE", price: 156.78, change: 2.34, marketCap: "171B", sector: "industrial", country: "USA", flag: "   ğŸ‡¸", founded: 1892, about: "GE is an American multinational conglomerate." },
      { rank: 81, name: "3M Company", symbol: "MMM", price: 98.45, change: 0.23, marketCap: "54B", sector: "industrial", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1902, about: "3M is an American multinational conglomerate corporation." },
      { rank: 82, name: "Starbucks", symbol: "SBUX", price: 92.34, change: 1.12, marketCap: "105B", sector: "consumer", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1971, about: "Starbucks is an American multinational chain of coffeehouses." },
      { rank: 83, name: "HSBC Holdings", symbol: "HSBC", price: 42.67, change: 0.56, marketCap: "161B", sector: "finance", country: "UK", flag: "ğŸ‡¬ğŸ‡§", founded: 1865, about: "HSBC is a British multinational banking and financial services company." },
      { rank: 84, name: "American Express", symbol: "AXP", price: 212.34, change: 1.89, marketCap: "154B", sector: "finance", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1850, about: "American Express is an American multinational financial services corporation." },
      { rank: 85, name: "UPS Inc.", symbol: "UPS", price: 145.67, change: 0.78, marketCap: "124B", sector: "industrial", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1907, about: "UPS is an American multinational shipping and supply chain company." },
      { rank: 86, name: "Booking Holdings", symbol: "BKNG", price: 3456.78, change: 12.34, marketCap: "125B", sector: "consumer", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1996, about: "Booking Holdings is a travel technology company." },
      { rank: 87, name: "Intuit Inc.", symbol: "INTU", price: 623.45, change: 3.21, marketCap: "175B", sector: "tech", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1983, about: "Intuit is an American business that specializes in financial software." },
      { rank: 88, name: "Unilever plc", symbol: "UL", price: 52.34, change: 0.34, marketCap: "134B", sector: "consumer", country: "UK", flag: "ğŸ‡¬ğŸ‡§", founded: 1929, about: "Unilever is a British multinational consumer goods company." },
      { rank: 89, name: "Charles Schwab", symbol: "SCHW", price: 67.89, change: 0.89, marketCap: "123B", sector: "finance", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1971, about: "Charles Schwab is an American multinational financial services company." },
      { rank: 90, name: "BP plc", symbol: "BP", price: 36.78, change: -0.23, marketCap: "110B", sector: "energy", country: "UK", flag: "ğŸ‡¬ğŸ‡§", founded: 1909, about: "BP is a British multinational oil and gas company." },
      { rank: 91, name: "Raytheon Tech", symbol: "RTX", price: 98.45, change: 0.67, marketCap: "139B", sector: "industrial", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 2020, about: "Raytheon is an American aerospace and defense conglomerate." },
      { rank: 92, name: "Medtronic", symbol: "MDT", price: 84.56, change: 0.45, marketCap: "113B", sector: "healthcare", country: "Ireland", flag: "ğŸ‡®ğŸ‡ª", founded: 1949, about: "Medtronic is a medical device company." },
      { rank: 93, name: "Deere & Company", symbol: "DE", price: 378.90, change: 2.12, marketCap: "109B", sector: "industrial", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1837, about: "Deere manufactures agricultural and construction machinery." },
      { rank: 94, name: "Blackrock Inc.", symbol: "BLK", price: 789.34, change: 4.56, marketCap: "118B", sector: "finance", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1988, about: "BlackRock is an American investment management corporation." },
      { rank: 95, name: "ConocoPhillips", symbol: "COP", price: 112.34, change: -0.67, marketCap: "132B", sector: "energy", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 2002, about: "ConocoPhillips is an American multinational energy corporation." },
      { rank: 96, name: "Airbus SE", symbol: "AIR.PA", price: 156.78, change: 1.34, marketCap: "124B", sector: "industrial", country: "Netherlands", flag: "ğŸ‡³ğŸ‡±", founded: 1970, about: "Airbus is a European multinational aerospace corporation." },
      { rank: 97, name: "Gilead Sciences", symbol: "GILD", price: 78.45, change: 0.89, marketCap: "98B", sector: "healthcare", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1987, about: "Gilead Sciences is an American biopharmaceutical company." },
      { rank: 98, name: "Target Corp", symbol: "TGT", price: 156.78, change: 1.23, marketCap: "72B", sector: "consumer", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1902, about: "Target is an American retail corporation." },
      { rank: 99, name: "Citigroup", symbol: "C", price: 56.78, change: 0.78, marketCap: "110B", sector: "finance", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1998, about: "Citigroup is an American multinational investment bank." },
      { rank: 100, name: "PayPal Holdings", symbol: "PYPL", price: 62.34, change: 1.45, marketCap: "67B", sector: "tech", country: "USA", flag: "ğŸ‡ºğŸ‡¸", founded: 1998, about: "PayPal is an American financial technology company." }
    ];

    let filteredCompanies = [...companies];
    let currentTab = 'home';

    // Scenario metadata
    const scenarios = {
      car: { icon: 'ğŸš—', name: 'Car Negotiation' },
      salary: { icon: 'ğŸ’¼', name: 'Salary Negotiation' },
      vendor: { icon: 'ğŸª', name: 'Market Haggling' }
    };

    // Bargaining State
    let bargainState = {
      scenario: null,
      messages: [],
      currentPrice: 0,
      goalPrice: 0,
      originalPrice: 0,
      minPrice: 0,
      resistance: 0.7,
      rounds: 0,
      dealMade: false
    };

    const scenarioOptions = {
      car: [
        { name: "2020 Honda Civic", miles: "45,000 miles", seller: "Mike", originalPrice: 15000, goalPrice: 12000, minPrice: 11500 },
        { name: "2019 Toyota Corolla", miles: "62,000 miles", seller: "Sarah", originalPrice: 13500, goalPrice: 10500, minPrice: 9500 },
        { name: "2021 Mazda3", miles: "28,000 miles", seller: "James", originalPrice: 18000, goalPrice: 15000, minPrice: 14000 },
        { name: "2018 Hyundai Elantra", miles: "78,000 miles", seller: "Dave", originalPrice: 11000, goalPrice: 8500, minPrice: 7500 }
      ],
      salary: [
        { role: "Software Developer", company: "TechCorp", interviewer: "HR Manager", originalPrice: 85000, goalPrice: 95000, minPrice: 80000 },
        { role: "UX Designer", company: "DesignStudio", interviewer: "Design Director", originalPrice: 72000, goalPrice: 82000, minPrice: 68000 },
        { role: "Product Manager", company: "StartupXYZ", interviewer: "CEO", originalPrice: 95000, goalPrice: 110000, minPrice: 90000 },
        { role: "Data Analyst", company: "DataFlow Inc", interviewer: "Engineering Lead", originalPrice: 78000, goalPrice: 88000, minPrice: 75000 }
      ],
      vendor: [
        { item: "Handcrafted leather bag", description: "genuine leather, hand-stitched", seller: "Ahmed", originalPrice: 120, goalPrice: 60, minPrice: 45 },
        { item: "Vintage silk scarf", description: "authentic Persian design", seller: "Fatima", originalPrice: 85, goalPrice: 40, minPrice: 30 },
        { item: "Carved wooden box", description: "intricate inlay work, solid oak", seller: "Hassan", originalPrice: 150, goalPrice: 75, minPrice: 55 },
        { item: "Beaded necklace", description: "semi-precious stones, handmade", seller: "Leila", originalPrice: 95, goalPrice: 50, minPrice: 35 }
      ]
    };

    // Will be populated when scenario starts
    let currentScenarioData;

    // Initialize SDK
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange: async (newConfig) => {
          config = { ...newConfig };
          updateUI();
        },
        mapToCapabilities: (cfg) => ({
          recolorables: [],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (cfg) => new Map([
          ['app_title', cfg.app_title || defaultConfig.app_title],
          ['market_tab_label', cfg.market_tab_label || defaultConfig.market_tab_label],
          ['bargain_tab_label', cfg.bargain_tab_label || defaultConfig.bargain_tab_label]
        ])
      });
    }

    function updateUI() {
      document.getElementById('app-title').textContent = config.app_title || defaultConfig.app_title;
      if (document.getElementById('app-title-2')) {
        document.getElementById('app-title-2').textContent = config.app_title || defaultConfig.app_title;
      }
      document.getElementById('tab-market').innerHTML = `ğŸ“ˆ ${config.market_tab_label || defaultConfig.market_tab_label}`;
      document.getElementById('tab-bargain').innerHTML = `ğŸ¤ ${config.bargain_tab_label || defaultConfig.bargain_tab_label}`;
      document.getElementById('tab-market-2').innerHTML = `ğŸ“ˆ ${config.market_tab_label || defaultConfig.market_tab_label}`;
      document.getElementById('tab-bargain-2').innerHTML = `ğŸ¤ ${config.bargain_tab_label || defaultConfig.bargain_tab_label}`;
    }

    // Tab Switching
    function switchTab(tab) {
      currentTab = tab;
      const homePage = document.getElementById('home-page');
      const marketPage = document.getElementById('market-page');
      const bargainPage = document.getElementById('bargain-page');

      homePage.classList.add('hidden');
      marketPage.classList.add('hidden');
      bargainPage.classList.add('hidden');

      if (tab === 'home') {
        homePage.classList.remove('hidden');
      } else if (tab === 'market') {
        marketPage.classList.remove('hidden');
        updateTabHighlight('market');
      } else if (tab === 'bargain') {
        bargainPage.classList.remove('hidden');
        updateTabHighlight('bargain');
      }
    }

    function updateTabHighlight(activeTab) {
      const tabs = ['market', 'bargain'];
      
      tabs.forEach(tab => {
        const btn = document.getElementById(`tab-${tab}`);
        const btn2 = document.getElementById(`tab-${tab}-2`);
        
        if (tab === activeTab) {
          if (btn) btn.className = 'px-4 py-2 rounded-lg font-medium transition-all duration-300 bg-gradient-to-r from-emerald-500 to-cyan-500 text-white';
          if (btn2) btn2.className = 'px-4 py-2 rounded-lg font-medium transition-all duration-300 bg-gradient-to-r from-emerald-500 to-cyan-500 text-white';
        } else {
          if (btn) btn.className = 'px-4 py-2 rounded-lg font-medium transition-all duration-300 text-slate-400 hover:text-white';
          if (btn2) btn2.className = 'px-4 py-2 rounded-lg font-medium transition-all duration-300 text-slate-400 hover:text-white';
        }
      });
    }

    function goToMarket() {
      switchTab('market');
    }

    function goToBargain() {
      switchTab('bargain');
    }

    // Generate money emojis on home page
    function generateMoneyEmojis() {
      const container = document.getElementById('money-container');
      const emojis = ['ğŸ’°', 'ğŸ’µ', 'ğŸ’´', 'ğŸ’¶', 'ğŸ’·', 'ğŸ’³', 'ğŸ¤‘'];
      
      for (let i = 0; i < 25; i++) {
        const emoji = document.createElement('div');
        emoji.className = 'money-emoji';
        emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
        emoji.style.left = Math.random() * 100 + '%';
        emoji.style.top = Math.random() * 100 + '%';
        emoji.style.animationDelay = (Math.random() * 5) + 's';
        container.appendChild(emoji);
      }
    }

    // Stock Market Functions
    function renderStockTable() {
      const tbody = document.getElementById('stock-table-body');
      tbody.innerHTML = '';

      filteredCompanies.forEach((company, index) => {
        const changeClass = company.change >= 0 ? 'text-emerald-400' : 'text-red-400';
        const changeSymbol = company.change >= 0 ? 'â–²' : '   ';

        const row = document.createElement('tr');
        row.className = 'stock-row border-b border-purple-800/20 hover:bg-slate-800/30 transition-colors cursor-pointer';
        row.style.animationDelay = `${index * 20}ms`;
        row.classList.add('animate-slide-up');

        row.innerHTML = `
          <td class="px-4 py-4 text-slate-500 font-medium">${company.rank}</td>
          <td class="px-4 py-4">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-slate-700 to-slate-800 flex items-center justify-center text-xs font-bold text-emerald-400">
                ${company.symbol.substring(0, 2)}
              </div>
              <div>
                <div class="font-medium text-white">${company.name}</div>
                <div class="text-xs text-slate-500">${getSectorLabel(company.sector)}</div>
              </div>
            </div>
          </td>
          <td class="px-4 py-4 mono text-cyan-400 font-medium">${company.symbol}</td>
          <td class="px-4 py-4 text-right mono text-white font-medium">$${company.price.toLocaleString()}</td>
          <td class="px-4 py-4 text-right ${changeClass} mono font-medium">${changeSymbol} ${Math.abs(company.change).toFixed(2)}%</td>
          <td class="px-4 py-4 text-right text-slate-300">$${company.marketCap}</td>
          <td class="px-4 py-4 text-center">
            <button onclick="event.stopPropagation(); showCompanyModal(${company.rank - 1})" 
              class="w-8 h-8 rounded-lg bg-slate-700/50 hover:bg-emerald-500/30 flex items-center justify-center text-slate-400 hover:text-emerald-400 transition-all duration-300 mx-auto">
              â„¹ï¸
            </button>
          </td>
        `;

        tbody.appendChild(row);
      });
    }

    function getSectorLabel(sector) {
      const labels = {
        tech: 'ğŸ’» Technology',
        finance: 'ğŸ¦ Finance',
        healthcare: 'ğŸ¥ Healthcare',
        energy: 'â›½ Energy',
        consumer: '   Consumer',
        industrial: 'ğŸ­ Industrial'
      };
      return labels[sector] || sector;
    }

    function showCompanyModal(index) {
      const company = companies[index];
      const modal = document.getElementById('company-modal');

      document.getElementById('modal-logo').innerHTML = company.symbol.substring(0, 2);
      document.getElementById('modal-company').textContent = company.name;
      document.getElementById('modal-symbol').textContent = company.symbol;
      document.getElementById('modal-flag').textContent = company.flag;
      document.getElementById('modal-country-name').textContent = company.country;
      document.getElementById('modal-sector').textContent = getSectorLabel(company.sector);
      document.getElementById('modal-price').textContent = `$${company.price.toLocaleString()}`;
      document.getElementById('modal-cap').textContent = `$${company.marketCap}`;
      document.getElementById('modal-about').textContent = company.about;
      document.getElementById('modal-founded').textContent = company.founded;

      const changeClass = company.change >= 0 ? 'text-emerald-400' : 'text-red-400';
      const changeSymbol = company.change >= 0 ? 'â–²' : 'â–¼';
      document.getElementById('modal-change').innerHTML = `
        <span class="${changeClass} font-bold">${changeSymbol} ${Math.abs(company.change).toFixed(2)}%</span>
        <span class="text-slate-500 text-sm">Today</span>
      `;

      modal.classList.remove('hidden');
    }

    function closeModal() {
      document.getElementById('company-modal').classList.add('hidden');
    }

    // Search and Filter
    document.getElementById('search-input').addEventListener('input', (e) => {
      const query = e.target.value.toLowerCase();
      filterCompanies(query, document.getElementById('sector-filter').value);
    });

    document.getElementById('sector-filter').addEventListener('change', (e) => {
      const query = document.getElementById('search-input').value.toLowerCase();
      filterCompanies(query, e.target.value);
    });

    function filterCompanies(query, sector) {
      filteredCompanies = companies.filter(company => {
        const matchesQuery = company.name.toLowerCase().includes(query) || 
                            company.symbol.toLowerCase().includes(query);
        const matchesSector = sector === 'all' || company.sector === sector;
        return matchesQuery && matchesSector;
      });
      renderStockTable();
    }

    // Bargaining AI Functions
    function renderScenarioSelection() {
      // Render car scenarios
      const carContainer = document.querySelectorAll('#scenario-select .grid')[0];
      carContainer.innerHTML = scenarioOptions.car.map((car, idx) => `
        <button onclick="startScenario('car', ${idx})" class="bg-slate-800/40 hover:bg-slate-700/40 border border-purple-700/30 hover:border-emerald-500/50 rounded-2xl p-4 text-left transition-all duration-300 group h-full">
          <div class="text-3xl mb-2">ğŸš—</div>
          <h4 class="font-bold text-white group-hover:text-emerald-400 transition-colors text-sm">${car.name}</h4>
          <p class="text-slate-400 text-xs mt-1">${car.miles}</p>
          <p class="text-emerald-400 text-xs font-bold mt-2">$${car.originalPrice.toLocaleString()}</p>
        </button>
      `).join('');

      // Render salary scenarios
      const salaryContainer = document.querySelectorAll('#scenario-select .grid')[1];
      salaryContainer.innerHTML = scenarioOptions.salary.map((sal, idx) => `
        <button onclick="startScenario('salary', ${idx})" class="bg-slate-800/40 hover:bg-slate-700/40 border border-purple-700/30 hover:border-emerald-500/50 rounded-2xl p-4 text-left transition-all duration-300 group h-full">
          <div class="text-3xl mb-2">ğŸ’¼</div>
          <h4 class="font-bold text-white group-hover:text-emerald-400 transition-colors text-sm">${sal.role}</h4>
          <p class="text-slate-400 text-xs mt-1">${sal.company}</p>
          <p class="text-emerald-400 text-xs font-bold mt-2">$${sal.originalPrice.toLocaleString()}/yr</p>
        </button>
      `).join('');

      // Render vendor scenarios
      const vendorContainer = document.querySelectorAll('#scenario-select .grid')[2];
      vendorContainer.innerHTML = scenarioOptions.vendor.map((vend, idx) => `
        <button onclick="startScenario('vendor', ${idx})" class="bg-slate-800/40 hover:bg-slate-700/40 border border-purple-700/30 hover:border-emerald-500/50 rounded-2xl p-4 text-left transition-all duration-300 group h-full">
          <div class="text-3xl mb-2">ğŸª</div>
          <h4 class="font-bold text-white group-hover:text-emerald-400 transition-colors text-sm">${vend.item}</h4>
          <p class="text-slate-400 text-xs mt-1">${vend.description}</p>
          <p class="text-emerald-400 text-xs font-bold mt-2">$${vend.originalPrice.toLocaleString()}</p>
        </button>
      `).join('');
    }

    function startScenario(type, index) {
      let scenarioData;
      let icon, title, opener;

      if (type === 'car') {
        scenarioData = scenarioOptions.car[index];
        icon = 'ğŸš—';
        title = `${scenarioData.name} - Negotiation`;
        opener = `Hey there! You're looking at my ${scenarioData.name}. It's got ${scenarioData.miles}, clean title, single owner. I'm asking $${scenarioData.originalPrice.toLocaleString()} for it. What do you think?`;
      } else if (type === 'salary') {
        scenarioData = scenarioOptions.salary[index];
        icon = 'ğŸ’¼';
        title = `${scenarioData.role} at ${scenarioData.company}`;
        opener = `Welcome! We'd like to offer you the ${scenarioData.role} position here at ${scenarioData.company}. Our initial offer is $${scenarioData.originalPrice.toLocaleString()} per year with standard benefits. How does that sound?`;
      } else if (type === 'vendor') {
        scenarioData = scenarioOptions.vendor[index];
        icon = 'ğŸª';
        title = `${scenarioData.item} - Haggling`;
        opener = `Ah, my friend! You have excellent taste! This ${scenarioData.item} is ${scenarioData.description}. For you, special price - only $${scenarioData.originalPrice.toLocaleString()}! You won't find better anywhere!`;
      }

      currentScenarioData = scenarioData;

      bargainState = {
        scenario: type,
        messages: [],
        currentPrice: scenarioData.originalPrice,
        goalPrice: scenarioData.goalPrice,
        originalPrice: scenarioData.originalPrice,
        minPrice: scenarioData.minPrice,
        resistance: 0.7,
        rounds: 0,
        dealMade: false
      };

      document.getElementById('scenario-select').classList.add('hidden');
      document.getElementById('chat-interface').classList.remove('hidden');

      document.getElementById('scenario-icon').textContent = icon;
      document.getElementById('scenario-title').textContent = title;
      document.getElementById('scenario-desc').textContent = `Seller: ${scenarioData.seller || scenarioData.interviewer || scenarioData.seller}`;

      const isSalary = type === 'salary';
      document.getElementById('goal-price').textContent = formatPrice(scenarioData.goalPrice, isSalary);
      document.getElementById('current-offer').textContent = formatPrice(scenarioData.originalPrice, isSalary);
      document.getElementById('progress-bar').style.width = '0%';

      addMessage('seller', opener);
      updateQuickResponses();
    }

    function formatPrice(price, isSalary = false) {
      if (isSalary) {
        return `$${price.toLocaleString()}/yr`;
      }
      return `$${price.toLocaleString()}`;
    }

    function addMessage(type, text) {
      const messagesContainer = document.getElementById('chat-messages');
      const messageDiv = document.createElement('div');
      messageDiv.className = `chat-bubble flex ${type === 'user' ? 'justify-end' : 'justify-start'}`;

      const scenario = scenarios[bargainState.scenario];
      const avatar = type === 'user' ? 'ğŸ‘¤' : scenario.icon;
      const bgClass = type === 'user' 
        ? 'bg-gradient-to-r from-emerald-500/20 to-cyan-500/20 border-emerald-500/30' 
        : 'bg-slate-800/50 border-purple-700/30';

      messageDiv.innerHTML = `
        <div class="flex items-start gap-3 max-w-[80%] ${type === 'user' ? 'flex-row-reverse' : ''}">
          <div class="w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center text-xl flex-shrink-0">
            ${avatar}
          </div>
          <div class="${bgClass} border rounded-2xl p-4">
            <p class="text-white">${text}</p>
          </div>
        </div>
      `;

      messagesContainer.appendChild(messageDiv);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;

      bargainState.messages.push({ type, text });
    }

    function sendMessage() {
      const input = document.getElementById('chat-input');
      const message = input.value.trim();
      if (!message || bargainState.dealMade) return;

      addMessage('user', message);
      input.value = '';

      setTimeout(() => {
        processUserMessage(message);
      }, 500 + Math.random() * 1000);
    }

    function processUserMessage(message) {
      bargainState.rounds++;

      const numbers = message.match(/\d+[\d,]*/g);
      let offeredPrice = numbers ? parseInt(numbers[0].replace(/,/g, '')) : null;

      const acceptKeywords = ['deal', 'accept', 'agree', 'okay', 'ok', 'yes', 'fine', 'take it'];
      const rejectKeywords = ['no', 'forget it', 'never', 'walk away', 'goodbye'];
      const isAccepting = acceptKeywords.some(kw => message.toLowerCase().includes(kw));
      const isRejecting = rejectKeywords.some(kw => message.toLowerCase().includes(kw));

      if (isRejecting && !offeredPrice) {
        addMessage('seller', getRejectResponse());
        return;
      }

      if (isAccepting && !offeredPrice) {
        finalizeDeal(bargainState.currentPrice);
        return;
      }

      if (offeredPrice) {
        handleOffer(offeredPrice);
      } else {
        handleGenericResponse(message);
      }

      updateQuickResponses();
    }

    function handleOffer(offeredPrice) {
      const isSalary = bargainState.scenario === 'salary';
      const minPrice = currentScenarioData.minPrice;
      const originalPrice = currentScenarioData.originalPrice;
      const goalPrice = currentScenarioData.goalPrice;

      let response;
      let newPrice = bargainState.currentPrice;

      if (isSalary) {
        // For salary: higher is better
        if (offeredPrice <= originalPrice * 0.9) {
          response = getSellerResponse('lowball');
        } else if (offeredPrice >= goalPrice) {
          finalizeDeal(goalPrice);
          return;
        } else {
          const acceptChance = Math.min(0.3 + (bargainState.rounds * 0.1), 0.7);
          if (Math.random() < acceptChance && offeredPrice >= minPrice) {
            newPrice = Math.round((offeredPrice + bargainState.currentPrice) / 2);
            if (newPrice >= goalPrice * 0.95) {
              finalizeDeal(offeredPrice);
              return;
            }
            response = getSellerResponse('counter', newPrice, isSalary);
          } else {
            const bump = Math.round((goalPrice - bargainState.currentPrice) * 0.3);
            newPrice = Math.min(bargainState.currentPrice + bump, goalPrice);
            response = getSellerResponse('partial', newPrice, isSalary);
          }
        }
      } else {
        // For car/items: lower is better
        if (offeredPrice >= originalPrice) {
          finalizeDeal(offeredPrice);
          return;
        } else if (offeredPrice < minPrice * 0.7) {
          response = getSellerResponse('lowball');
        } else if (offeredPrice >= minPrice) {
          const acceptChance = Math.min(0.2 + (bargainState.rounds * 0.15), 0.8);
          if (Math.random() < acceptChance) {
            finalizeDeal(offeredPrice);
            return;
          } else {
            newPrice = Math.round((offeredPrice + bargainState.currentPrice) / 2);
            response = getSellerResponse('counter', newPrice, isSalary);
          }
        } else {
          const drop = Math.round((bargainState.currentPrice - minPrice) * (0.2 + Math.random() * 0.2));
          newPrice = Math.max(bargainState.currentPrice - drop, minPrice);
          response = getSellerResponse('partial', newPrice, isSalary);
        }
      }

      bargainState.currentPrice = newPrice;
      updateProgress();
      addMessage('seller', response);
    }

    function getSellerResponse(type, price = 0, isSalary = false) {
      const formattedPrice = formatPrice(price, isSalary);

      const responses = {
        lowball: [
          `Ha! You can't be serious. That's way too ${isSalary ? 'low' : 'low'}. Let's talk real numbers here.`,
          `I appreciate the humor, but I have bills to pay too. Give me something reasonable.`,
          `Come on now, that's not even in the ballpark. You're wasting both our time with that offer.`,
          `I didn't come here to give things away. Be realistic!`
        ],
        counter: [
          `Hmm, I can see you're serious. Tell you what - I could do ${formattedPrice}. That's a fair deal.`,
          `You drive a hard bargain! How about we meet at ${formattedPrice}?`,
          `I respect that offer. Let me counter with ${formattedPrice}. What do you say?`,
          `Okay, okay... ${formattedPrice}. That's my best offer right now.`
        ],
        partial: [
          `I hear you, but I can't go that low. Best I can do right now is ${formattedPrice}.`,
          `Look, I'm trying to work with you here. ${formattedPrice} is where I'm at.`,
          `That's too aggressive for me. I could come down to ${formattedPrice} though.`,
          `We're getting closer! ${formattedPrice} is what I can offer. Sound fair?`
        ]
      };

      const options = responses[type];
      return options[Math.floor(Math.random() * options.length)];
    }

    function handleGenericResponse(message) {
      const genericResponses = [
        "So what number are we talking about? Give me your best offer.",
        "I hear you, but let's get down to brass tacks. What's your price?",
        "That's nice, but show me the money! What are you willing to pay?",
        "Words are great, but I need numbers. What's your offer?"
      ];
      addMessage('seller', genericResponses[Math.floor(Math.random() * genericResponses.length)]);
    }

    function getRejectResponse() {
      return "Hey, don't leave! I'm sure we can work something out. Give me another number!";
    }

    function finalizeDeal(finalPrice) {
      bargainState.dealMade = true;
      bargainState.currentPrice = finalPrice;
      updateProgress();

      const isSalary = bargainState.scenario === 'salary';
      const saved = isSalary 
        ? finalPrice - currentScenarioData.originalPrice 
        : currentScenarioData.originalPrice - finalPrice;
      const savedText = formatPrice(Math.abs(saved), isSalary);

      let resultMessage;
      if (isSalary) {
        resultMessage = saved > 0 
          ? `âœ… Agreement Reached! Compensation package finalized at ${formatPrice(finalPrice, true)}. You successfully secured ${savedText} above the initial proposal.`
          : `âœ… Agreement Reached! The position is yours at ${formatPrice(finalPrice, true)}. Welcome to the team!`;
      } else {
        resultMessage = `âœ… Transaction Closed! Final purchase price: ${formatPrice(finalPrice)}. Net savings achieved: ${savedText}.`;
      }

      addMessage('seller', resultMessage);

      setTimeout(() => {
        const feedback = generateNegotiationFeedback(finalPrice);
        addMessage('seller', feedback);
        
        document.getElementById('quick-responses').innerHTML = `
          <button onclick="resetBargain()" class="px-4 py-2 bg-gradient-to-r from-emerald-500 to-cyan-500 rounded-xl font-medium hover:from-emerald-400 hover:to-cyan-400 transition-all">
            ğŸ”„ Try Another Scenario
          </button>
        `;
      }, 1500);
    }

    function generateNegotiationFeedback(finalPrice) {
      const isSalary = bargainState.scenario === 'salary';
      const original = currentScenarioData.originalPrice;
      const goal = currentScenarioData.goalPrice;
      const min = currentScenarioData.minPrice;
      const rounds = bargainState.rounds;

      let performanceScore;
      let feedback = [];

      if (isSalary) {
        // For salary: higher final price is better
        const improvement = ((finalPrice - original) / (goal - original)) * 100;
        performanceScore = Math.min(100, improvement);

        if (performanceScore >= 90) {
          feedback.push("ğŸ“Š **Negotiation Analysis**: Exceptional performance. You maximized value extraction and demonstrated strong market positioning. Your counteroffers were well-calibrated.");
        } else if (performanceScore >= 70) {
          feedback.push("ğŸ“Š **Negotiation Analysis**: Strong negotiation execution. You secured meaningful value gains. Consider more aggressive opening positions earlier to anchor expectations.");
        } else if (performanceScore >= 50) {
          feedback.push("ğŸ“Š **Negotiation Analysis**: Moderate performance. You reached agreement but left gains on the table. Recommendation: Research market rates more thoroughly before negotiations and establish firmer anchors.");
        } else {
          feedback.push("ğŸ“Š **Negotiation Analysis**: Modest outcome. The counter-party retained significant leverage. For future engagements, gather competitive intelligence first and lead with stronger opening positions.");
        }
      } else {
        // For items/cars: lower final price is better
        const savings = ((original - finalPrice) / (original - goal)) * 100;
        performanceScore = Math.min(100, savings);

        if (performanceScore >= 90) {
          feedback.push("ğŸ“Š **Negotiation Analysis**: Outstanding negotiation discipline. You extracted maximum concessions while maintaining rapport. Your incremental bid strategy was expertly executed.");
        } else if (performanceScore >= 70) {
          feedback.push("ğŸ“Š **Negotiation Analysis**: Solid negotiation outcome. You secured meaningful price reductions. To improve: Build additional pressure points by exploring alternative options earlier in the dialogue.");
        } else if (performanceScore >= 50) {
          feedback.push("ğŸ“Š **Negotiation Analysis**: Acceptable transaction. However, significant value was left on the table. Advice: Conduct competitive analysis beforehand and use alternative suppliers as leverage points.");
        } else {
          feedback.push("ğŸ“Š **Negotiation Analysis**: Below-target performance. The seller maintained firm positioning. Next time: Establish your BATNA (Best Alternative to Negotiated Agreement) before engagement and reference competing options.");
        }
      }

      // Round efficiency
      if (rounds <= 4) {
        feedback.push("â±ï¸ **Efficiency**: Excellent. You achieved consensus swiftly, indicating strong negotiation acumen and clear value communication.");
      } else if (rounds <= 7) {
        feedback.push("â±ï¸ **Efficiency**: Good. You paced the negotiation appropriately, allowing both parties to adjust expectations gradually.");
      } else {
        feedback.push("â±ï¸ **Efficiency**: Moderate. Extended negotiation rounds suggest potential over-commitment. Consider establishing walk-away thresholds earlier to drive faster resolution.");
      }

      // Strategy recommendations
      if (isSalary) {
        if (performanceScore < 70) {
          feedback.push("ğŸ’¡ **Recommendation**: For salary discussions, always research industry benchmarks and compensation surveys. Lead with your market value, not their opening offer. Practice anchoring with competitive offers.");
        } else {
          feedback.push("ğŸ’¡ **Recommendation**: Maintain this approachâ€”your data-driven positioning and measured escalation were effective. Continue leveraging market intelligence in future engagements.");
        }
      } else {
        if (performanceScore < 70) {
          feedback.push("ğŸ’¡ **Recommendation**: Develop a sourcing strategyâ€”identify alternative vendors or products before negotiations. Use these as tactical reference points to create downward price pressure.");
        } else {
          feedback.push("ğŸ’¡ **Recommendation**: Excellent work. Your incremental offer structure and patience paid dividends. In future transactions, consider opening even lower to create additional negotiating room.");
        }
      }

      return feedback.join("\n\n");
    }

    function updateProgress() {
      const isSalary = bargainState.scenario === 'salary';

      document.getElementById('current-offer').textContent = formatPrice(bargainState.currentPrice, isSalary);

      let progress;
      if (isSalary) {
        progress = Math.min(100, Math.max(0, 
          ((bargainState.currentPrice - currentScenarioData.originalPrice) / (currentScenarioData.goalPrice - currentScenarioData.originalPrice)) * 100
        ));
      } else {
        progress = Math.min(100, Math.max(0,
          ((currentScenarioData.originalPrice - bargainState.currentPrice) / (currentScenarioData.originalPrice - currentScenarioData.goalPrice)) * 100
        ));
      }

      document.getElementById('progress-bar').style.width = `${progress}%`;
    }

    function updateQuickResponses() {
      if (bargainState.dealMade) return;

      const isSalary = bargainState.scenario === 'salary';
      const current = bargainState.currentPrice;

      let offers;
      if (isSalary) {
        offers = [
          current + Math.round((currentScenarioData.goalPrice - current) * 0.3),
          current + Math.round((currentScenarioData.goalPrice - current) * 0.5),
          currentScenarioData.goalPrice
        ];
      } else {
        offers = [
          Math.round(current * 0.85),
          Math.round(current * 0.9),
          Math.round((current + currentScenarioData.goalPrice) / 2)
        ];
      }

      const container = document.getElementById('quick-responses');
      container.innerHTML = `
        <span class="text-slate-500 text-sm mr-2">Quick offers:</span>
        ${offers.map(o => `
          <button onclick="quickOffer(${o})" class="px-3 py-1.5 bg-slate-700/50 hover:bg-emerald-500/30 border border-purple-700/30 hover:border-emerald-500/50 rounded-lg text-sm text-slate-300 hover:text-white transition-all">
            ${formatPrice(o, isSalary)}
          </button>
        `).join('')}
        <button onclick="acceptDeal()" class="px-3 py-1.5 bg-emerald-500/20 hover:bg-emerald-500/30 border border-emerald-500/30 rounded-lg text-sm text-emerald-400 hover:text-emerald-300 transition-all">
          âœ… Accept ${formatPrice(current, isSalary)}
        </button>
      `;
    }

    function quickOffer(amount) {
      const isSalary = bargainState.scenario === 'salary';
      document.getElementById('chat-input').value = `I'll offer ${formatPrice(amount, isSalary)}`;
      sendMessage();
    }

    function acceptDeal() {
      addMessage('user', "Alright, you've got a deal!");
      setTimeout(() => finalizeDeal(bargainState.currentPrice), 500);
    }

    function resetBargain() {
      document.getElementById('scenario-select').classList.remove('hidden');
      document.getElementById('chat-interface').classList.add('hidden');
      document.getElementById('chat-messages').innerHTML = '';
      bargainState = {
        scenario: null,
        messages: [],
        currentPrice: 0,
        goalPrice: 0,
        originalPrice: 0,
        minPrice: 0,
        resistance: 0.7,
        rounds: 0,
        dealMade: false
      };
    }

    // Close modal on backdrop click
    document.getElementById('company-modal').addEventListener('click', (e) => {
      if (e.target === document.getElementById('company-modal')) {
        closeModal();
      }
    });

    // Initialize
    renderStockTable();
    generateMoneyEmojis();
    updateUI();
    renderScenarioSelection();

    // Attach chat event listeners
    document.getElementById('send-btn').addEventListener('click', sendMessage);
    document.getElementById('chat-input').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') sendMessage();
    });
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c8db7bd05b5e6d1',t:'MTc3MDI0NTMyOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>  
